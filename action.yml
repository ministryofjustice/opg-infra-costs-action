name: 'OPG Infrastructure Costing'
description: 'Send cost data for this service to metrics api'
inputs:
  arn:
    required: true
    description: 'The AWS ARN string to fetch cost data for'
  region:
    default: 'eu-west-1'
    description: 'AWS region'
  service:
    required: true
    description: 'Name of the service (such as use-an-lpa)'
  environment:
    required: true
    description: 'Name of the environment (such as production or the branch name)'
  key:
    required: true
    description: 'The authentication key set as a header for all requests'
  uri:
    required: true
    description: 'The URI of the api sending this data to'
runs:
  using: 'docker'
  image: 'Dockerfile'
  args:
    - "--key=${{ inputs.key }}"
    - "--uri=${{ inputs.uri }}"
    - "--arn=${{ inputs.arn }}"
    - "--region=${{ inputs.region }}"
    - "--service=${{ inputs.service }}"
    - "--environment=${{ inputs.environment }}"
